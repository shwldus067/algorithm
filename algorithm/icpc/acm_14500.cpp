#include<iostream>
using namespace std;
int ml[19]={0, 3, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2};
int mc[19]={3, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 2, 1, 2, 2, 1, 2, 1};
int dc[19][4]={{0, 1, 2, 3}, {0, 0, 0, 0},
			{0, 1, 0, 1},
			{0, 0, 0, 1}, {0, 1, 1, 1}, {0, 1, 1, 1}, {0, 0, 0, 1},
			{0, 1, 2, 2}, {0, 0, 1, 2}, {0, 0, 1, 2}, {0, 1, 2, 2},
			{0, 0, 1, 1}, {0, 1, 1, 2}, {0, 0, 1, 1}, {0, 1, 1, 2},
			{0, 1, 2, 1}, {0, 1, 1, 1}, {1, 0, 1, 2}, {0, 0, 0, 1}};
int dl[19][4]={{0, 0, 0, 0}, {0, 1, 2, 3},
			{0, 0, 1, 1},
			{0, 1, 2, 2}, {0, 0, 1, 2}, {2, 2, 1, 0}, {2, 1, 0, 0},
			{1, 1, 1, 0}, {0, 1, 1, 1}, {1, 0, 0, 0}, {0, 0, 0, 1},
			{0, 1, 1, 2}, {1, 1, 0, 0}, {2, 1, 1, 0}, {0, 0, 1, 1},
			{0, 0, 0, 1}, {1, 0, 1, 2}, {0, 1, 1, 1}, {0, 1, 2, 1}};
int main(){
	ios::sync_with_stdio(false);
	cin.tie(0);
	int N, M;
	cin>>N>>M;
	int s[N][M];
	for(int i=0;i<N;i++)
		for(int j=0;j<M;j++)
			cin>>s[i][j];
	int res=0, cur;
	for(int i=0;i<19;i++){
		for(int l=0;l<N-ml[i];l++){
			for(int c=0;c<M-mc[i];c++){
				cur=0;
				for(int j=0;j<4;j++){
					cur+=s[l+dl[i][j]][c+dc[i][j]];
				}
				if(cur>res)	res=cur;
			}
		}
	}
	cout<<res<<"\n";
	return 0;
}
